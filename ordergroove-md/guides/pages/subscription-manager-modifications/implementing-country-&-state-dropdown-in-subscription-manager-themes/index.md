---
title: Implementing Country & State Dropdown in Subscription Manager Themes
source: https://developer.ordergroove.com/docs/implementing-country-state-dropdown-in-subscription-manager-themes
converted_from: html
---

# Implementing Country & State Dropdown in Subscription Manager Themes

## Ordergroove 101

*   [Developer Fundamentals](/docs/developer-fundamentals)
    *   [Systems Landscape Map](/docs/landscape-map)
    *   [Data model at a glance](/docs/data-model-at-a-glance)
    *   [Subscription Creation via Purchase POST](/docs/subscription-creation-via-purchase-post)
    *   [Recurring Order Placement](/docs/recurring-order-placement)
    *   [Subscription Manager Tagging and Authentication](/docs/subscription-manager-tagging-and-authentication)
    *   [Customer and Payment Updates](/docs/customer-and-payment-updates)
*   [General FAQ](/docs/general-faq)
*   [Install Ordergroove on an Online Store 2.0 theme](/docs/use-ordergroove-with-online-store-20)
    *   [Installing Ordergroove with App Embed](/docs/installing-ordergroove-with-app-embed)
*   [Custom Platform and Headless Subscription Implementation](/docs/integrating-with-a-custom-platform-1)

## Program Migration

*   [Migrate my data to Ordergroove](/docs/program-migration)
*   [Self-serve migration guide](/docs/view-self-serve-migration-guide)
*   [Self-serve migration guide for Recharge](/docs/self-serve-migration-guide-for-recharge)
*   [Staged Migrations](/docs/staged-migrations)

## Syncing Ordergroove Data

*   [Sync Ordergroove Data into Internal Systems](/docs/sync-ordergroove-data-into-internal-systems)
*   [Sync Objects](/docs/implement-custom-data-pipelines)
    *   [Implement Custom Data Pipelines](/docs/implement-custom-data-pipelines)
    *   [Using Prebuilt Connectors](/docs/using-prebuilt-connectors)
    *   [SFTP File Drops](/docs/sftp-file-drops)
*   [Sync Events](/docs/sync-events)

## Product Catalog

*   [Offer Tagging](/docs/offer-tagging)
*   [Product Feed](/docs/integrating-with-a-custom-platform)

## Subscription Enrollment

*   [Getting started](/docs/getting-started)
*   [First Order Place Date control for Shopify Merchants](/docs/first-order-place-date-control-for-shopify-merchants)
*   [Showing Discounted Price](/docs/showing-discounted-price-in-shopify)
*   [Customizing the Initial Offer Incentive (IOI)](/docs/customizing-the-initial-offer-incentive-ioi-using-shopify-scripts)
*   [Free shipping on initial orders](/docs/free-shipping-on-initial-orders-with-shopify-scripts)
*   [Cart Opt-In Tagging](/docs/shopify-cart-opt-in-tagging)
*   [Tagging the Product Details Page (PDP)](/docs/tagging-the-product-details-page-pdp)
*   [Real Time Stock Update](/docs/real-time-stock-update)
*   [Add a subscription to cart](/docs/modify-a-subscription-from-checkout-flow)
    *   [Offer Code Elements](/docs/offer-code-elements)
    *   [Domain Objects](/docs/domain-objects)
    *   [Helper Methods](/docs/helper-methods)
*   [Add a subscription offer to quickview, homepage, or other areas of your site](/docs/quickview-offers)
    *   [Tracking Affiliate Codes on Recurring Orders](/docs/tracking-affiliate-codes-on-recurring-orders)
*   [Troubleshooting Cart Offers](/docs/troubleshooting-cart-offers)
*   [Modify a subscription from email and SMS](/docs/modify-a-subscription-from-email-and-sms)
*   [Advanced Offer Customizations & FAQ](/docs/advanced-offer-customizations-faq)

## Subscription Manager Overview

*   [Subscription Manager From The Customer's Perspective](/docs/getting-started-1)
*   [Tour of Subscription Manager v25](/docs/tour-of-subscription-manager-v25)
    *   [Intro to v25 for Developers transitioning from v0](/docs/intro-to-v25-for-developers-transitioning-from-v0)
    *   [Customizing calendars and dates in v25](/docs/customizing-calendars-and-dates-in-v25)
    *   [Understanding Subscription Manager Custom Elements](/docs/understanding-subscription-manager-custom-elements)
*   [Subscription Manager File Descriptions](/docs/subscription-manager-file-descriptions)
*   [Subscription Manager v0 Components & Containers](/docs/subscription-manager-components-containers)
    *   [Subscription Manager Templates](/docs/subscription-manager-templates)
    *   [Orders Unsent Section](/docs/orders-unsent-section)
        *   [Skip Order](/docs/skip-order)
        *   [Send Now](/docs/send-now)
        *   [Change Date](/docs/change-date)
    *   [Orders Processing Section](/docs/orders-processing-section)
    *   [Inactive Subscriptions Section](/docs/inactive-subscriptions-section)
*   [Customize your Subscription Manager templates without breaking tracking](/docs/sm-template-customization-tracking)
*   [Subscription Manager Templates Changelog](/docs/subscription-manager-templates-changelog)

## Subscription Manager Modifications

*   [Subscription Manager Development Overview](/docs/subscription-manager-overview)
    *   [Edit Code with the Advanced Editor](/docs/edit-code-with-the-advanced-editor)
    *   [Subscription Manager Theme Editor Overview](/docs/subscription-manager-theme-editor-overview)
    *   [Subscription Manager Development Guide](/docs/subscription-manager-development-guide)
    *   [Customizing Subscription Manager Sections on Shopify](/docs/customizing-subscription-manager-sections-on-shopify)
    *   [Refreshing data in the Subscription Manager](/docs/refreshing-data-in-the-subscription-manager)
    *   [Objects](/docs/objects)
    *   [Object Reference](/docs/object-reference)
    *   [Translations](/docs/translations)
    *   [Subscription Manager Local Development](/docs/subscription-manager-local-development)
    *   [Debugging with Redux](/docs/debugging-with-redux)
    *   [Working with dates in the Subscription Manager](/docs/working-with-dates-in-the-subscription-manager)
*   [Modify the Change Billing Process Button](/docs/modify-the-change-billing-process-button)
*   [Implementing Country & State Dropdown in Subscription Manager Themes](/docs/implementing-country-state-dropdown-in-subscription-manager-themes)
*   [Adding a Cancel Button to Modals](/docs/adding-a-cancel-button-to-modals)
*   [Limiting Future Dates in the Change Date Calendar](/docs/limiting-future-dates-in-the-change-date-calendar)
*   [Dynamic Shipping Restrictions in the Subscription Manager](/docs/dynamic-shipping-restrictions-in-the-subscription-manager)
*   [One Time SKU Swap Configuration in the Subscription Manager](/docs/one-time-sku-swap-configuration-in-the-subscription-manager)
*   [Adding a Scrollbar to Inactive Subscriptions in the Subscription Manager](/docs/adding-a-scrollbar-to-inactive-subscriptions-in-the-subscription-manager)
*   [Enabling Payment Updates for Shopify New Accounts](/docs/enabling-payment-updates-for-shopify-new-accounts)

## Subscription Manager Development with APIs

*   [Calling Ordergrooveâ€™s REST APIs from within Subscription Manager](/docs/call-rest-apis-from-within-subscription-manager)
*   [Integrating External APIs in the Subscription Manager](/docs/integrating-external-apis-in-the-subscription-manager)

## Tagging Subscription Manager

*   [Tagging the Subscription Manager](/docs/tagging-the-subscription-manager-on-shopify)
*   [Convert your customers/account page to support Online Store 2.0](/docs/convert-your-customersaccount-page-to-support-online-store-20)

## Upsell and 1-Click

*   [Instant Upsell Overview](/docs/getting-started-2)
    *   [Instant Upsell through API](/docs/add-a-one-time-item-to-an-upcoming-order)
*   [1-Click Actions in Emails](/docs/1-click-actions-in-emails)

## Subscription Types

*   [Bundle Subscriptions](/docs/bundle-subscriptions)
    *   [Configuring Bundles](/docs/configuring-bundles)
    *   [Box Subscription Creation on Shopify](/docs/box-subscription-creation-on-shopify)
    *   [Bundle API Components](/docs/bundle-api-components)
    *   [Build Your Own Box Subscriptions (Legacy)](/docs/build-your-own-box-subscriptions)
        *   [Shopify - Build Your Own Box Subscriptions (Legacy)](/docs/build-your-own-box-subscriptions-on-shopify)
*   [Guided Selling](/docs/guided-selling)
*   [Curation Subscriptions: Rotating Box or Club](/docs/curation-subscriptions-rotating-box-or-club)
*   [Prepaid Subscriptions](/docs/how-to-manage-prepaid-renewal-behaviors)
    *   [How to Manage Prepaid Renewal Behaviors](/docs/how-to-manage-prepaid-renewal-behaviors)
*   [Rotating Subscriptions](/docs/rotating-subscriptions)
    *   [Ordinal Based Rotating Products](/docs/ordinal-based-rotating-products)
    *   [Time Window Based Rotating Products](/docs/time-window-based-rotating-products)
*   [Digital Subscriptions](/docs/digital-subscriptions)

## program data

*   [Configuring PayPal](/docs/configuring-paypal)
*   [Removing Ordergroove code from your Shopify theme](/docs/removing-ordergroove-code-from-your-shopify-theme)
*   [Webhooks overview (Legacy)](/docs/via-webhooks)
    *   [Configure Webhooks via API](/docs/configure-webhooks-via-api)
    *   [Expiring or Termed Subscriptions Using Webhooks](/docs/expiring-or-termed-subscriptions-using-webhooks)
*   [HMAC and AES Authentication](/docs/hmac-and-aes-authentication)

# Implementing Country & State Dropdown in Subscription Manager Themes

[Suggest Edits](/edit/implementing-country-state-dropdown-in-subscription-manager-themes)

Rather than asking a customer to manually type the state or province of their shipping address, and risking typos or formatting issues, we now provide a list of states and provinces based on the country selected. If your subscription manager doesn't have this feature, you can add it through the advanced editor.

* * *

## 

Technical Details

[](#technical-details)

The list of states/provinces is being grabbed in script.js by making a call to:

[https://static.ordergroove.com/@ordergroove/i18n-data/latest/i18n\_country\_data.json](https://static.ordergroove.com/@ordergroove/i18n-data/latest/i18n_country_data.json)

Country names are pulled from locale files first (i.e. en-US.json). If no translation is provided, default from _i18n\_country\_data.json_ is used (English.)

![](https://files.readme.io/52067f7-Untitled.png)

* * *

## 

Accessing the Advanced Editor

[](#accessing-the-advanced-editor)

We'll be using the advanced editor to modify the Subscription Manager. You can access it through your Ordergroove Admin:

1.  Log in to [Ordergroove](https://rc3.ordergroove.com/).
2.  Go to **Subscriptions** on the top toolbar, and select **Subscription Manager**.
3.  Toggle **Advanced** on the top left.

> ## ðŸš§
> 
> Support
> 
> Some aspects of this article require technical expertise with coding languages. This is self-serve and outside of the normal support policy.

* * *

## 

Including Changes without Overwriting Customizations

[](#including-changes-without-overwriting-customizations)

To include this functionality without losing customizations to the theme, we have to edit some code in _script.js_.

### 

1\. Add the following lines

[](#1-add-the-following-lines)

The code changes required in _change-shipment-address.liquid_ are as follows (as noted in [Github](https://github.com/ordergroove/plush-toys/pull/708/files)):

Liquid

``const countriesPromise = fetch( 'https://static.ordergroove.com/@ordergroove/i18n-data/latest/i18n_country_data.json' ).then(res => res.json());  async function render_countries_options(enabled_countries, localized_countries) { const html = ((window.og || {}).smi || {}).html; const countriesByCode = await countriesPromise; const enabledCountries = Object.entries(countriesByCode).filter(([code]) => enabled_countries.includes(code)); const countriesHtml = enabledCountries .sort((a, b) => (a[1].name > b[1].name ? 1 : -1)) .reduce((acc, [code, { name }]) => { const label = localized_countries[code] || name; acc.push(html` <option value="${code}">${label}</option> `); return acc; }, []); return countriesHtml; }  function toggleStateSelect(stateSelectElement, show) { const stateSelectLabelElement = stateSelectElement.parentNode.querySelector('label'); stateSelectElement.style.display = show ? 'block' : 'none'; stateSelectElement.required = show; stateSelectLabelElement.style.display = show ? 'inline' : 'none'; }  async function handle_country_change(ev) { const countriesByCode = await countriesPromise; const selectedCountry = countriesByCode[ev.target.value]; const states = selectedCountry ? selectedCountry.regions : null; const stateSelectElement = ev.target.closest('form').querySelector('[name="state_province_code"]'); const selectLabel = stateSelectElement.querySelector('option').innerText;  stateSelectElement.innerHTML = ''; const nullOption = document.createElement('option'); nullOption.value = ''; nullOption.innerText = selectLabel; stateSelectElement.appendChild(nullOption);  if (selectedCountry) { // Valid country selected if (states) {  // Country has list of states/regions   // Show state select field  toggleStateSelect(stateSelectElement, true);  // Append all states to select states.forEach(({ code, name }) => { const option = document.createElement('option'); option.value = code; option.innerText = name; stateSelectElement.appendChild(option); }); } else { // Country has no array of states/regions, e.g. France // Hide state select field toggleStateSelect(stateSelectElement, false); } } else { // Country un-selected // Show state select field toggleStateSelect(stateSelectElement, true); } }  function reset_state_options(element) { element.innerHTML = ''; const option = document.createElement('option'); option.value = ''; option.innerText = 'Select a State/Province'; element.appendChild(option); element.parentNode.querySelector('label').innerText = 'State/Province/Region '; }  function close_address_modal(ev) { close_closest_modal(ev); const $stateSelect = ev.target.querySelector('[name="state_province_code"]'); reset_state_options($stateSelect); }``

### 

2\. Rename Variable

[](#2-rename-variable)

On line 5, we recommend renaming the variable for clarity.

Liquid

`{% set localized_countries = 'localized_countries' | t %}`

### 

3\. Replace Lines 54 to 86

[](#3-replace-lines-54-to-86)

Replace lines 54 to 86 with the following:

Liquid

`<div class='og-row'> <div class='og-form-group og-col'> <label class='og-form-label {{ 'og-required' if 'required_fields.shipping_address.country_code' | setting }}' for='country_{{ order.public_id }}'> {{ 'form_address_country' | t }} </label> <select class='og-form-select' name='country_code' id='country_code_{{ order.public_id }}' required @change={{ 'handle_country_change' | js }}> <option value="">{{ 'country_select_text' | t }}</option> {{ 'render_countries_options(enabled_countries, localized_countries)' | js | until }} </select> </div> <div class='og-form-group og-col'> <label class='og-form-label {{ 'og-required' if 'required_fields.shipping_address.state_province_code' | setting }}' for='state_{{ order.public_id }}'> {{ 'form_address_state' | t }} </label> <select id='state_{{ order.public_id }}' class='og-form-select' name='state_province_code' required> <option value="">{{ 'state_select_text' | t }}</option> </select> </div> </div> <div class='og-row'> <div class='og-form-group og-col'> <label class='og-form-label {{ 'og-required' if 'required_fields.shipping_address.city' | setting }}' for='city_{{ order.public_id }}'> {{ 'form_address_city' | t }} </label> <input type='text' id='city_{{ order.public_id }}' class='og-form-control' name='city' ?required='{{ 'required_fields.shipping_address.city' | setting }}'/> </div> <div class='og-form-group og-col'> <label class='og-form-label {{ 'og-required' if 'required_fields.shipping_address.zip_postal_code' | setting }}' for='zip_{{ order.public_id }}'> {{ 'form_address_zip' | t }}  </label> <input type='text' id='zip_{{ order.public_id }}' class='og-form-control' name='zip_postal_code' ?required='{{ 'required_fields.shipping_address.zip_postal_code' | setting }}'/> </div> </div>`

And youâ€™re all set. No changes were made to _smi-core_.

Updated over 1 year ago

* * *

*   [Table of Contents](#)
*   *   [Technical Details](#technical-details)
    *   [Accessing the Advanced Editor](#accessing-the-advanced-editor)
    *   [Including Changes without Overwriting Customizations](#including-changes-without-overwriting-customizations)
        *   [1\. Add the following lines](#1-add-the-following-lines)
        *   [2\. Rename Variable](#2-rename-variable)
        *   [3\. Replace Lines 54 to 86](#3-replace-lines-54-to-86)
