---
title: Cart Opt-In Tagging
source: https://developer.ordergroove.com/docs/shopify-cart-opt-in-tagging
converted_from: html
---

# Cart Opt-In Tagging

## Ordergroove 101

*   [Developer Fundamentals](/docs/developer-fundamentals)
    *   [Systems Landscape Map](/docs/landscape-map)
    *   [Data model at a glance](/docs/data-model-at-a-glance)
    *   [Subscription Creation via Purchase POST](/docs/subscription-creation-via-purchase-post)
    *   [Recurring Order Placement](/docs/recurring-order-placement)
    *   [Subscription Manager Tagging and Authentication](/docs/subscription-manager-tagging-and-authentication)
    *   [Customer and Payment Updates](/docs/customer-and-payment-updates)
*   [General FAQ](/docs/general-faq)
*   [Install Ordergroove on an Online Store 2.0 theme](/docs/use-ordergroove-with-online-store-20)
    *   [Installing Ordergroove with App Embed](/docs/installing-ordergroove-with-app-embed)
*   [Custom Platform and Headless Subscription Implementation](/docs/integrating-with-a-custom-platform-1)

## Program Migration

*   [Migrate my data to Ordergroove](/docs/program-migration)
*   [Self-serve migration guide](/docs/view-self-serve-migration-guide)
*   [Self-serve migration guide for Recharge](/docs/self-serve-migration-guide-for-recharge)
*   [Staged Migrations](/docs/staged-migrations)

## Syncing Ordergroove Data

*   [Sync Ordergroove Data into Internal Systems](/docs/sync-ordergroove-data-into-internal-systems)
*   [Sync Objects](/docs/implement-custom-data-pipelines)
    *   [Implement Custom Data Pipelines](/docs/implement-custom-data-pipelines)
    *   [Using Prebuilt Connectors](/docs/using-prebuilt-connectors)
    *   [SFTP File Drops](/docs/sftp-file-drops)
*   [Sync Events](/docs/sync-events)

## Product Catalog

*   [Offer Tagging](/docs/offer-tagging)
*   [Product Feed](/docs/integrating-with-a-custom-platform)

## Subscription Enrollment

*   [Getting started](/docs/getting-started)
*   [First Order Place Date control for Shopify Merchants](/docs/first-order-place-date-control-for-shopify-merchants)
*   [Showing Discounted Price](/docs/showing-discounted-price-in-shopify)
*   [Customizing the Initial Offer Incentive (IOI)](/docs/customizing-the-initial-offer-incentive-ioi-using-shopify-scripts)
*   [Free shipping on initial orders](/docs/free-shipping-on-initial-orders-with-shopify-scripts)
*   [Cart Opt-In Tagging](/docs/shopify-cart-opt-in-tagging)
*   [Tagging the Product Details Page (PDP)](/docs/tagging-the-product-details-page-pdp)
*   [Real Time Stock Update](/docs/real-time-stock-update)
*   [Add a subscription to cart](/docs/modify-a-subscription-from-checkout-flow)
    *   [Offer Code Elements](/docs/offer-code-elements)
    *   [Domain Objects](/docs/domain-objects)
    *   [Helper Methods](/docs/helper-methods)
*   [Add a subscription offer to quickview, homepage, or other areas of your site](/docs/quickview-offers)
    *   [Tracking Affiliate Codes on Recurring Orders](/docs/tracking-affiliate-codes-on-recurring-orders)
*   [Troubleshooting Cart Offers](/docs/troubleshooting-cart-offers)
*   [Modify a subscription from email and SMS](/docs/modify-a-subscription-from-email-and-sms)
*   [Advanced Offer Customizations & FAQ](/docs/advanced-offer-customizations-faq)

## Subscription Manager Overview

*   [Subscription Manager From The Customer's Perspective](/docs/getting-started-1)
*   [Tour of Subscription Manager v25](/docs/tour-of-subscription-manager-v25)
    *   [Intro to v25 for Developers transitioning from v0](/docs/intro-to-v25-for-developers-transitioning-from-v0)
    *   [Customizing calendars and dates in v25](/docs/customizing-calendars-and-dates-in-v25)
    *   [Understanding Subscription Manager Custom Elements](/docs/understanding-subscription-manager-custom-elements)
*   [Subscription Manager File Descriptions](/docs/subscription-manager-file-descriptions)
*   [Subscription Manager v0 Components & Containers](/docs/subscription-manager-components-containers)
    *   [Subscription Manager Templates](/docs/subscription-manager-templates)
    *   [Orders Unsent Section](/docs/orders-unsent-section)
        *   [Skip Order](/docs/skip-order)
        *   [Send Now](/docs/send-now)
        *   [Change Date](/docs/change-date)
    *   [Orders Processing Section](/docs/orders-processing-section)
    *   [Inactive Subscriptions Section](/docs/inactive-subscriptions-section)
*   [Customize your Subscription Manager templates without breaking tracking](/docs/sm-template-customization-tracking)
*   [Subscription Manager Templates Changelog](/docs/subscription-manager-templates-changelog)

## Subscription Manager Modifications

*   [Subscription Manager Development Overview](/docs/subscription-manager-overview)
    *   [Edit Code with the Advanced Editor](/docs/edit-code-with-the-advanced-editor)
    *   [Subscription Manager Theme Editor Overview](/docs/subscription-manager-theme-editor-overview)
    *   [Subscription Manager Development Guide](/docs/subscription-manager-development-guide)
    *   [Customizing Subscription Manager Sections on Shopify](/docs/customizing-subscription-manager-sections-on-shopify)
    *   [Refreshing data in the Subscription Manager](/docs/refreshing-data-in-the-subscription-manager)
    *   [Objects](/docs/objects)
    *   [Object Reference](/docs/object-reference)
    *   [Translations](/docs/translations)
    *   [Subscription Manager Local Development](/docs/subscription-manager-local-development)
    *   [Debugging with Redux](/docs/debugging-with-redux)
    *   [Working with dates in the Subscription Manager](/docs/working-with-dates-in-the-subscription-manager)
*   [Modify the Change Billing Process Button](/docs/modify-the-change-billing-process-button)
*   [Implementing Country & State Dropdown in Subscription Manager Themes](/docs/implementing-country-state-dropdown-in-subscription-manager-themes)
*   [Adding a Cancel Button to Modals](/docs/adding-a-cancel-button-to-modals)
*   [Limiting Future Dates in the Change Date Calendar](/docs/limiting-future-dates-in-the-change-date-calendar)
*   [Dynamic Shipping Restrictions in the Subscription Manager](/docs/dynamic-shipping-restrictions-in-the-subscription-manager)
*   [One Time SKU Swap Configuration in the Subscription Manager](/docs/one-time-sku-swap-configuration-in-the-subscription-manager)
*   [Adding a Scrollbar to Inactive Subscriptions in the Subscription Manager](/docs/adding-a-scrollbar-to-inactive-subscriptions-in-the-subscription-manager)
*   [Enabling Payment Updates for Shopify New Accounts](/docs/enabling-payment-updates-for-shopify-new-accounts)

## Subscription Manager Development with APIs

*   [Calling Ordergroove’s REST APIs from within Subscription Manager](/docs/call-rest-apis-from-within-subscription-manager)
*   [Integrating External APIs in the Subscription Manager](/docs/integrating-external-apis-in-the-subscription-manager)

## Tagging Subscription Manager

*   [Tagging the Subscription Manager](/docs/tagging-the-subscription-manager-on-shopify)
*   [Convert your customers/account page to support Online Store 2.0](/docs/convert-your-customersaccount-page-to-support-online-store-20)

## Upsell and 1-Click

*   [Instant Upsell Overview](/docs/getting-started-2)
    *   [Instant Upsell through API](/docs/add-a-one-time-item-to-an-upcoming-order)
*   [1-Click Actions in Emails](/docs/1-click-actions-in-emails)

## Subscription Types

*   [Bundle Subscriptions](/docs/bundle-subscriptions)
    *   [Configuring Bundles](/docs/configuring-bundles)
    *   [Box Subscription Creation on Shopify](/docs/box-subscription-creation-on-shopify)
    *   [Bundle API Components](/docs/bundle-api-components)
    *   [Build Your Own Box Subscriptions (Legacy)](/docs/build-your-own-box-subscriptions)
        *   [Shopify - Build Your Own Box Subscriptions (Legacy)](/docs/build-your-own-box-subscriptions-on-shopify)
*   [Guided Selling](/docs/guided-selling)
*   [Curation Subscriptions: Rotating Box or Club](/docs/curation-subscriptions-rotating-box-or-club)
*   [Prepaid Subscriptions](/docs/how-to-manage-prepaid-renewal-behaviors)
    *   [How to Manage Prepaid Renewal Behaviors](/docs/how-to-manage-prepaid-renewal-behaviors)
*   [Rotating Subscriptions](/docs/rotating-subscriptions)
    *   [Ordinal Based Rotating Products](/docs/ordinal-based-rotating-products)
    *   [Time Window Based Rotating Products](/docs/time-window-based-rotating-products)
*   [Digital Subscriptions](/docs/digital-subscriptions)

## program data

*   [Configuring PayPal](/docs/configuring-paypal)
*   [Removing Ordergroove code from your Shopify theme](/docs/removing-ordergroove-code-from-your-shopify-theme)
*   [Webhooks overview (Legacy)](/docs/via-webhooks)
    *   [Configure Webhooks via API](/docs/configure-webhooks-via-api)
    *   [Expiring or Termed Subscriptions Using Webhooks](/docs/expiring-or-termed-subscriptions-using-webhooks)
*   [HMAC and AES Authentication](/docs/hmac-and-aes-authentication)

# Cart Opt-In Tagging

[Suggest Edits](/edit/shopify-cart-opt-in-tagging)

These instructions will guide you to implement the new Ordergroove Cart Opt-In on your current or in-development theme.

> ## 📘
> 
> Platform
> 
> This article is only relevant for stores on **Shopify**. eCommerce platforms outside of Shopify have cart opt-in installed by default, and don't need to worry about adding it to their program.

* * *

## 

Overview

[](#overview)

There are 4 steps:

1.  Add cart opt-in tags to the theme
2.  Modify existing Ordergroove files to support cart opt-ins
3.  Side cart customizations
4.  Other store customizations

As a reminder, before making any changes to the theme, it is best to make a duplicate version of the theme to work on. This ensures that you can test the final version before it goes live in your store.

### 

Prerequisites

[](#prerequisites)

*   Your store is on Shopify.
*   You have an offer with location 'Cart' configured for your store.
*   These instructions are aimed for themes where the cart is constructed using liquid. If your cart is not using liquid, for example is using handlebars, you will need to modify these instructions to work with your theme.
*   Requires page tagging and nuances will occur if you're on a legacy install on the previous Ordergroove offers without a cart offer. If you're unsure, please reach out to [Ordergroove Support](https://help.ordergroove.com/hc/en-us/requests/new) and we'll be happy to confirm your install version.

> ## 🚧
> 
> Styling
> 
> If your store has multiple offer locations and you plan on styling them differently from each other, for example changing the text in the mini cart, you will need to [create a different Enrollment Offer](https://help.ordergroove.com/hc/en-us/articles/360026386794) for each location in the [Ordergroove Merchant Admin](https://rc3.ordergroove.com/subscriptions/enrollment/home/).

* * *

## 

1\. Add cart offer tags to the theme

[](#1-add-cart-offer-tags-to-the-theme)

The tag for the cart offer needs to be added to the cart page and also the side cart page, if your theme has one. Search your theme for the files where the item information is displayed on the cart and side cart. For example, you would look for where the photo and description for your item are displayed in the cart.

> ## 👍
> 
> Tip
> 
> In the theme Dawn, the cart page is titled ‘main-cart-items.liquid’, and in the theme Debut, the cart page is titled ‘_cart-template.liquid_’. Look for files in your theme with similar names.

Once you find the appropriate files, place the following code where you wish the offer to display. If your theme displays selling plan titles in the cart, we recommend placing this code above or below the code to display the selling plan.

Liquid

`<og-offer product="{{item.key}}" location="cart" cart></og-offer>`

Note that the product attribute in the og-offer tag is expecting the cart line item key. This is typically set through _{{item.key}}_ in liquid. However, if your cart item list is not generated via liquid, you will need to change how you set this attribute.

If your cart item list is generated outside of liquid, please refer to your template language to identify the right syntax for accessing the variant Id and set the product attribute with that.

**Note**: An indicator for this is, if in your cart file, you need to place the tag between {% raw %} and {% endraw %}, which indicates exiting and re-entering liquid code.

* * *

## 

2\. Modify existing Ordergroove files to support cart offers

[](#2-modify-existing-ordergroove-files-to-support-cart-offers)

If you are just getting started with Ordergroove, please skip this and go to Step 4. Otherwise, if you have already been using us for subscriptions, please make the following changes to ensure your theme is ready to support cart offer.

1.  Open the file ordergroove.js under assets. Remove all contents of the ordergroove.js file so the file is empty and save the file.
2.  Open the file ‘ordergroove\_static\_asset.liquid’. Add attribute data-shopify-selling-plans to the script tag containing src=”[https://static.ordergroove.com/”](https://static.ordergroove.com/%E2%80%9D) so it will appear as

JavaScript

`<script type="text/javascript" data-shopify-selling-plans src="https://static.ordergroove.com/{Ordergroove Merchant ID} /main.js"></script>`

> ## 🚧
> 
> Important
> 
> Double-check that this tag has the attribute data-shopify-selling-plans.

Note that this change upgrades you to the latest version of Ordergroove offers for Shopify. If you have built customizations based on the older version, they may no longer be supported. Please thoroughly check that all custom functionality works as expected.

* * *

## 

3\. Confirm the cart offer appears on your store

[](#3-confirm-the-cart-offer-appears-on-your-store)

After making the above changes, preview your theme from Shopify admin. Navigate to a product that is subscription eligible and add it to cart. Then open the cart page. You should see the new cart offer appear on the page.

* * *

## 

4\. Side Cart Customizations

[](#4-side-cart-customizations)

Ordergroove uses Shopify’s cart API to refresh the cart when a customer changes their subscription on our offer. This ensures that prices and selling plan titles are updated for a seamless user experience. However, if you are using a minicart or sidecart, or if your cart otherwise uses Javascript to refresh, you will need to hook Ordergroove’s cart refresh into your cart’s refresh process.

To do this, first you need to identify how your theme triggers the cart to refresh. If you are not the developer who works with your theme, you will likely want to engage their help in finding this, or reach out to the theme developer. Otherwise, a good place to start is how the quantity change triggers refresh of the cart. Once you identify this method, fill in the below template with your method.

JavaScript

    `// Hooks OG cart updated to cart refresh document.addEventListener('og-cart-updated', ev => {               //your cart refresh method here         ev.preventDefault();     });`

Then open ordergroove\_static\_asset.liquid, and paste the above function with the rest of the javascript within the script tag containing javascript code, or somewhere else in your Javascript which runs for the cart.

For example, you can place it right under the following lines in ordergroove\_static\_asset.liquid (right above the script tag closing ):

JavaScript

`consentText: encodeURI( '{{ 'shopify.checkout.payment.subscription_agreement_label_html' | t | replace: "'", "&apos;" | replace: " ", " " | strip_newlines }}' ), consentWarning: '{{ 'shopify.checkout.field_errors.subscription_agreement_blank' | t | replace: "'", "&apos;" | replace: " ", " " | strip_newlines }}', } }`

* * *

## 

Other Store Customizations

[](#other-store-customizations)

If your theme has any other customizations that affect how subscriptions are processed, they may be affected by upgrading to the new version of offers. Please regress and check all functionality to make sure that everything is working properly.

Updated over 1 year ago

* * *

*   [Table of Contents](#)
*   *   [Overview](#overview)
        *   [Prerequisites](#prerequisites)
    *   [1\. Add cart offer tags to the theme](#1-add-cart-offer-tags-to-the-theme)
    *   [2\. Modify existing Ordergroove files to support cart offers](#2-modify-existing-ordergroove-files-to-support-cart-offers)
    *   [3\. Confirm the cart offer appears on your store](#3-confirm-the-cart-offer-appears-on-your-store)
    *   [4\. Side Cart Customizations](#4-side-cart-customizations)
    *   [Other Store Customizations](#other-store-customizations)
