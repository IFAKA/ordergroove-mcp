---
title: Subscription Creation via Purchase POST
source: https://developer.ordergroove.com/docs/subscription-creation-via-purchase-post
converted_from: html
---

# Subscription Creation via Purchase POST

## Ordergroove 101

*   [Developer Fundamentals](/docs/developer-fundamentals)
    *   [Systems Landscape Map](/docs/landscape-map)
    *   [Data model at a glance](/docs/data-model-at-a-glance)
    *   [Subscription Creation via Purchase POST](/docs/subscription-creation-via-purchase-post)
    *   [Recurring Order Placement](/docs/recurring-order-placement)
    *   [Subscription Manager Tagging and Authentication](/docs/subscription-manager-tagging-and-authentication)
    *   [Customer and Payment Updates](/docs/customer-and-payment-updates)
*   [General FAQ](/docs/general-faq)
*   [Install Ordergroove on an Online Store 2.0 theme](/docs/use-ordergroove-with-online-store-20)
    *   [Installing Ordergroove with App Embed](/docs/installing-ordergroove-with-app-embed)
*   [Custom Platform and Headless Subscription Implementation](/docs/integrating-with-a-custom-platform-1)

## Program Migration

*   [Migrate my data to Ordergroove](/docs/program-migration)
*   [Self-serve migration guide](/docs/view-self-serve-migration-guide)
*   [Self-serve migration guide for Recharge](/docs/self-serve-migration-guide-for-recharge)
*   [Staged Migrations](/docs/staged-migrations)

## Syncing Ordergroove Data

*   [Sync Ordergroove Data into Internal Systems](/docs/sync-ordergroove-data-into-internal-systems)
*   [Sync Objects](/docs/implement-custom-data-pipelines)
    *   [Implement Custom Data Pipelines](/docs/implement-custom-data-pipelines)
    *   [Using Prebuilt Connectors](/docs/using-prebuilt-connectors)
    *   [SFTP File Drops](/docs/sftp-file-drops)
*   [Sync Events](/docs/sync-events)

## Product Catalog

*   [Offer Tagging](/docs/offer-tagging)
*   [Product Feed](/docs/integrating-with-a-custom-platform)

## Subscription Enrollment

*   [Getting started](/docs/getting-started)
*   [First Order Place Date control for Shopify Merchants](/docs/first-order-place-date-control-for-shopify-merchants)
*   [Showing Discounted Price](/docs/showing-discounted-price-in-shopify)
*   [Customizing the Initial Offer Incentive (IOI)](/docs/customizing-the-initial-offer-incentive-ioi-using-shopify-scripts)
*   [Free shipping on initial orders](/docs/free-shipping-on-initial-orders-with-shopify-scripts)
*   [Cart Opt-In Tagging](/docs/shopify-cart-opt-in-tagging)
*   [Tagging the Product Details Page (PDP)](/docs/tagging-the-product-details-page-pdp)
*   [Real Time Stock Update](/docs/real-time-stock-update)
*   [Add a subscription to cart](/docs/modify-a-subscription-from-checkout-flow)
    *   [Offer Code Elements](/docs/offer-code-elements)
    *   [Domain Objects](/docs/domain-objects)
    *   [Helper Methods](/docs/helper-methods)
*   [Add a subscription offer to quickview, homepage, or other areas of your site](/docs/quickview-offers)
    *   [Tracking Affiliate Codes on Recurring Orders](/docs/tracking-affiliate-codes-on-recurring-orders)
*   [Troubleshooting Cart Offers](/docs/troubleshooting-cart-offers)
*   [Modify a subscription from email and SMS](/docs/modify-a-subscription-from-email-and-sms)
*   [Advanced Offer Customizations & FAQ](/docs/advanced-offer-customizations-faq)

## Subscription Manager Overview

*   [Subscription Manager From The Customer's Perspective](/docs/getting-started-1)
*   [Tour of Subscription Manager v25](/docs/tour-of-subscription-manager-v25)
    *   [Intro to v25 for Developers transitioning from v0](/docs/intro-to-v25-for-developers-transitioning-from-v0)
    *   [Customizing calendars and dates in v25](/docs/customizing-calendars-and-dates-in-v25)
    *   [Understanding Subscription Manager Custom Elements](/docs/understanding-subscription-manager-custom-elements)
*   [Subscription Manager File Descriptions](/docs/subscription-manager-file-descriptions)
*   [Subscription Manager v0 Components & Containers](/docs/subscription-manager-components-containers)
    *   [Subscription Manager Templates](/docs/subscription-manager-templates)
    *   [Orders Unsent Section](/docs/orders-unsent-section)
        *   [Skip Order](/docs/skip-order)
        *   [Send Now](/docs/send-now)
        *   [Change Date](/docs/change-date)
    *   [Orders Processing Section](/docs/orders-processing-section)
    *   [Inactive Subscriptions Section](/docs/inactive-subscriptions-section)
*   [Customize your Subscription Manager templates without breaking tracking](/docs/sm-template-customization-tracking)
*   [Subscription Manager Templates Changelog](/docs/subscription-manager-templates-changelog)

## Subscription Manager Modifications

*   [Subscription Manager Development Overview](/docs/subscription-manager-overview)
    *   [Edit Code with the Advanced Editor](/docs/edit-code-with-the-advanced-editor)
    *   [Subscription Manager Theme Editor Overview](/docs/subscription-manager-theme-editor-overview)
    *   [Subscription Manager Development Guide](/docs/subscription-manager-development-guide)
    *   [Customizing Subscription Manager Sections on Shopify](/docs/customizing-subscription-manager-sections-on-shopify)
    *   [Refreshing data in the Subscription Manager](/docs/refreshing-data-in-the-subscription-manager)
    *   [Objects](/docs/objects)
    *   [Object Reference](/docs/object-reference)
    *   [Translations](/docs/translations)
    *   [Subscription Manager Local Development](/docs/subscription-manager-local-development)
    *   [Debugging with Redux](/docs/debugging-with-redux)
    *   [Working with dates in the Subscription Manager](/docs/working-with-dates-in-the-subscription-manager)
*   [Modify the Change Billing Process Button](/docs/modify-the-change-billing-process-button)
*   [Implementing Country & State Dropdown in Subscription Manager Themes](/docs/implementing-country-state-dropdown-in-subscription-manager-themes)
*   [Adding a Cancel Button to Modals](/docs/adding-a-cancel-button-to-modals)
*   [Limiting Future Dates in the Change Date Calendar](/docs/limiting-future-dates-in-the-change-date-calendar)
*   [Dynamic Shipping Restrictions in the Subscription Manager](/docs/dynamic-shipping-restrictions-in-the-subscription-manager)
*   [One Time SKU Swap Configuration in the Subscription Manager](/docs/one-time-sku-swap-configuration-in-the-subscription-manager)
*   [Adding a Scrollbar to Inactive Subscriptions in the Subscription Manager](/docs/adding-a-scrollbar-to-inactive-subscriptions-in-the-subscription-manager)
*   [Enabling Payment Updates for Shopify New Accounts](/docs/enabling-payment-updates-for-shopify-new-accounts)

## Subscription Manager Development with APIs

*   [Calling Ordergrooveâ€™s REST APIs from within Subscription Manager](/docs/call-rest-apis-from-within-subscription-manager)
*   [Integrating External APIs in the Subscription Manager](/docs/integrating-external-apis-in-the-subscription-manager)

## Tagging Subscription Manager

*   [Tagging the Subscription Manager](/docs/tagging-the-subscription-manager-on-shopify)
*   [Convert your customers/account page to support Online Store 2.0](/docs/convert-your-customersaccount-page-to-support-online-store-20)

## Upsell and 1-Click

*   [Instant Upsell Overview](/docs/getting-started-2)
    *   [Instant Upsell through API](/docs/add-a-one-time-item-to-an-upcoming-order)
*   [1-Click Actions in Emails](/docs/1-click-actions-in-emails)

## Subscription Types

*   [Bundle Subscriptions](/docs/bundle-subscriptions)
    *   [Configuring Bundles](/docs/configuring-bundles)
    *   [Box Subscription Creation on Shopify](/docs/box-subscription-creation-on-shopify)
    *   [Bundle API Components](/docs/bundle-api-components)
    *   [Build Your Own Box Subscriptions (Legacy)](/docs/build-your-own-box-subscriptions)
        *   [Shopify - Build Your Own Box Subscriptions (Legacy)](/docs/build-your-own-box-subscriptions-on-shopify)
*   [Guided Selling](/docs/guided-selling)
*   [Curation Subscriptions: Rotating Box or Club](/docs/curation-subscriptions-rotating-box-or-club)
*   [Prepaid Subscriptions](/docs/how-to-manage-prepaid-renewal-behaviors)
    *   [How to Manage Prepaid Renewal Behaviors](/docs/how-to-manage-prepaid-renewal-behaviors)
*   [Rotating Subscriptions](/docs/rotating-subscriptions)
    *   [Ordinal Based Rotating Products](/docs/ordinal-based-rotating-products)
    *   [Time Window Based Rotating Products](/docs/time-window-based-rotating-products)
*   [Digital Subscriptions](/docs/digital-subscriptions)

## program data

*   [Configuring PayPal](/docs/configuring-paypal)
*   [Removing Ordergroove code from your Shopify theme](/docs/removing-ordergroove-code-from-your-shopify-theme)
*   [Webhooks overview (Legacy)](/docs/via-webhooks)
    *   [Configure Webhooks via API](/docs/configure-webhooks-via-api)
    *   [Expiring or Termed Subscriptions Using Webhooks](/docs/expiring-or-termed-subscriptions-using-webhooks)
*   [HMAC and AES Authentication](/docs/hmac-and-aes-authentication)

# Subscription Creation via Purchase POST

[Suggest Edits](/edit/subscription-creation-via-purchase-post)

When any user completes checkout, Ordergroove needs to be notified about this event. You will send a secure HTTP POST that will provide Ordergroove with the necessary information to create one or more subscriptions on our servers. Ordergroove will be expecting a purchase POST regardless of whether or not the customer is checking out with a subscription item. If there is a subscription item, Ordergroove will create a new subscription and allow the customer to begin managing the subscription. If there is no subscription item, Ordergroove will log the OG cart session as a non-subscription checkout and clear the cart session.

> ## â—ï¸
> 
> Note
> 
> Ordergroove requires that each checkout from your store results in a purchase post to Ordergroove, whether the post contains a subscription or not. Critical analytics data for subscription conversion and program efficacy use this data to provide a complete picture of your subscription program's performance. Please be sure to test and confirm that any/all checkouts are sending purchase posts to Ordergroove when proceeding with this step.

* * *

## 

Request Structure

[](#request-structure)

Destination

Staging: [https://staging.sc.ordergroove.com/subscription/create](https://staging.sc.ordergroove.com/subscription/create)  
Production: [https://sc.ordergroove.com/subscription/create](https://sc.ordergroove.com/subscription/create)

API Keys

Staging: [https://rc3.stg.ordergroove.com/keys/](https://rc3.stg.ordergroove.com/keys/)  
Production: [https://rc3.ordergroove.com/keys/](https://rc3.ordergroove.com/keys/)

*   All fields in the request are required for Ordergoove's subscription creation validation unless noted as optional
*   If you choose not to send cc\_exp\_date and card type (which are optional fields), then you may forego taking advantage of our credit card expiring soon email notifications to the subscriber
*   Any requests made to the Ordergroove servers from your application should be accompanied with a 5-second timeout. In the event that Ordergroove is unavailable, your application should be able to continue to run seamlessly.
*   Each string in the body of the POST must be URL encoded. Please do NOT URL encode the entire POST and please do not URL encode the authorization headers.

HeaderExample HeaderRequest

`x-api-key:<REPLACE_ME_WITH_API_KEY>`

`x-api-key:5DVCQ2fCQkCkpP1AYyWAdB2G9QjgRVJ428UcHksCuD55owwBiaqLQWctzGAQssfpsp42w7VYFaXrhY5TtxCUQu2`

`create_request={   "merchant_id": "<MERCHANT_PUBLIC_ID>",   "og_cart_tracking": false,   "merchant_order_id": "abc123",   "user": {     "user_id": "<MERCHANT_USER_ID>",     "first_name": "Nicholas",     "last_name": "Bundy",     "email": "[[emailÂ protected]](/cdn-cgi/l/email-protection)",     "phone_number": "555-555-5555",       "shipping_address": {       "first_name": "Nicholas",       "last_name": "Bundy",       "company_name": "Ordergroove", // Optional       "address": "75 Broad Street",       "address2": "23rd Floor", // Optional       "city": "New York",       "state_province_code": "NY",       "zip_postal_code": "10004",       "phone": "555-555-5555",       "fax": "", // Optional       "country_code": "US" // Must be two characters maximum     },     "billing_address": { // Optional - OG can store billing address fields if needed     "first_name": "Nicholas",     "last_name": "Bundy",     "company_name": "Ordergroove", // Optional     "address": "75 Broad Street",     "address2": "23rd Floor", // Optional     "city": "New York",     "state_province_code": "NY",     "zip_postal_code": "10004",     "phone": "555-555-5555",     "fax": "", // Optional     "country_code": "US" // Must be two characters maximum     }   },   "payment": { // cc_exp_date, and cc_type are optional   "token_id": "7654321",   "cc_exp_date": "<AES_ENCRYPTED_CC_EXP_DATE>", // Must be two digits for the month, a slash, and four-digits for year, e.g. 01/2019 | AES encrypted, then URL encoded | Value should always be 12/2099 for PayPal   "cc_type": "1" // The credit card type is 1 = Visa, 2 = MasterCard, 3 = American Express, 4 = Discover   },   "products": [     {     "product": "123456789",     "sku": "123456789",     "subscription_info": {        "quantity":2,       "tracking_override": {          "offer": "903ecf3e5efc12e49d61bc764e106cf6",         "every": 4,         "every_period": 2,       }     },     "purchase_info": {       "quantity": "2",       "price": "2.00", // price per unit        "discounted_price": "1.90", // price per unit after discount       "total": "3.80" // discounted_price * quantity      }     }   ] }`

> ## ðŸ“˜
> 
> Note
> 
> For the "products" array in this POST, if you are using Ordergroove's javascript injected offers, then you can call OG.getOptins(); which will return everything you need to place within that array. If you are hosting your own enrollment experience, you will need to create the products array as shown in the example above.

* * *

## 

Additional Purchase POST Objects

[](#additional-purchase-post-objects)

**subscription\_info**

*   first\_order\_place\_date - If necessary, this allows you to define when the first recurring order will be set for this subscription
*   extra\_data - Can be used for any information that you want stored on the subscription level and then passed back at the time of order placement.
*   components - Sets components within a legacy bundle subscription
*   multi\_item\_bundle\_components - Creates a New Bundle Subscription. Multiple bundle items will be created linked to this subscription. **The subscription product should be a bundle product\_type while the products in the array needs to be standard products**
*   subscription\_type - If set to 'prepaid' can create a prepaid subscription. You will also need to provide `prepaid_orders_per_billing` field to define how many orders were paid for. For example:

JSON

`"products": {     "subscription_info": {       "subscription_type": "prepaid",       "prepaid_orders_per_billing": 1,       "renewal_behavior": "autorenew",       "price": "12",       "quantity": 1     },     "product": "123",     "sku": "123"   }`

**tracking\_override**

*   product - Allows you to define a different product that you want the subscription to be created for (use case is buy x subscribe to y)

**Example**

This example highlights all of the additional objects above and where they live within the products array of the Purchase POST

JSON

`[ ...   {     "product": "10365",     "subscription_info": {       "components": [         "B987654",         "B987654",         "C000000",         "C000000"       ],       "first_order_place_date": "2022-05-01"       "extra_data":{         "pet_name": "Rover",         "breed": "Great Pyranese"       },      },   "multi_item_bundle_components": [           {             "product": "41049345949751",             "quantity": 2           },           {             "product": 40969287073847,             "quantity": 2           },           {             "product": 40967805337655,             "quantity": 2           }         ],     "tracking_override": {       "every": 2,       "every_period": 3,       "offer": "cfec81b6be4b11ebb3580ef6d8743325",       "product": "10000"     }   } ... ]`

> ## ðŸ‘
> 
> Additional Information
> 
> Take a look at the [Purchase POST API Endpoint](/reference/purchase-post-api) for more information about request body parameters.

* * *

## 

Purchase POST Responses

[](#purchase-post-responses)

If a successful connection is made, the request will always result in a secure HTTP response object with code 200/201/206 and a JSON payload

**Success - Request Received**

JSON

`{"result": "Subscription request received", "subs_req_id": "59f215d4b3ade33e68c8ae9b"}`

**Error Responses**

Given the amount of data being provided and the order in which the contents of the payload are validated and created, there will be instances where a 207, 400, 401, or 409 status will be returned, but the customer, shipping, and payment Ordergroove IDs will be provided as they were created, even though there may have been an issue with some or all products provided in the request.

*   207 â€“ Request contained multiple subscriptions and some were successfully created while others were not.
*   400 â€“ Invalid request. No subscriptions were created. Provides details about what specifically was missing or invalid in the request.
*   401/403 â€“ Authentication failed.
*   409 â€“ Conflict: A request with the given merchant\_order\_id was already received and processed.

If there are any errors, they will be found in the errors object of the response.

Some examples:

JSON

`{"error": "Invalid Merchant MERCHANT_PUBLIC_ID"} {"error": "Merchant ID must be a string"} {"error_message": "Merchant order id cannot be null"} {"error_message": "Missing payment data to create record"} {"error_message": "The credit card encryption is not valid"} {"error_message": "Expiration date is not valid, received: "} {"error_message": "Paymetric tokenization error"}`

**Error Logging and Retry Logic**

It is recommended that you have email notifications tied to the 400, 401, 403 and 409 error responses. If an issue with the POST can be identified and corrected within 24 hours, it should be resent to Ordergroove. If multiple POSTs are returning the same response, it likely points to a larger issue with the integration that should be investigated. Any retries of 409 responses will need to have the merchant\_order\_id field modified.

In the event that you receive a 500 level error, it is recommended that you re-send the POST 3 times within the next 10 minutes. If there is still no successful connection, you should retry the POST again after 24 hours. After 24 hours, no more retries should be attempted as the contents of the customer's cart are no longer reliable.

Updated 2 months ago

* * *

*   [Table of Contents](#)
*   *   [Request Structure](#request-structure)
    *   [Additional Purchase POST Objects](#additional-purchase-post-objects)
    *   [Purchase POST Responses](#purchase-post-responses)
