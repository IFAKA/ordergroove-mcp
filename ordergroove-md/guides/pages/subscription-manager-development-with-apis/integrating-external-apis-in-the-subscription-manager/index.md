---
title: Integrating External APIs in the Subscription Manager
source: https://developer.ordergroove.com/docs/integrating-external-apis-in-the-subscription-manager
converted_from: html
---

# Integrating External APIs in the Subscription Manager

## Ordergroove 101

*   [Developer Fundamentals](/docs/developer-fundamentals)
    *   [Systems Landscape Map](/docs/landscape-map)
    *   [Data model at a glance](/docs/data-model-at-a-glance)
    *   [Subscription Creation via Purchase POST](/docs/subscription-creation-via-purchase-post)
    *   [Recurring Order Placement](/docs/recurring-order-placement)
    *   [Subscription Manager Tagging and Authentication](/docs/subscription-manager-tagging-and-authentication)
    *   [Customer and Payment Updates](/docs/customer-and-payment-updates)
*   [General FAQ](/docs/general-faq)
*   [Install Ordergroove on an Online Store 2.0 theme](/docs/use-ordergroove-with-online-store-20)
    *   [Installing Ordergroove with App Embed](/docs/installing-ordergroove-with-app-embed)
*   [Custom Platform and Headless Subscription Implementation](/docs/integrating-with-a-custom-platform-1)

## Program Migration

*   [Migrate my data to Ordergroove](/docs/program-migration)
*   [Self-serve migration guide](/docs/view-self-serve-migration-guide)
*   [Self-serve migration guide for Recharge](/docs/self-serve-migration-guide-for-recharge)
*   [Staged Migrations](/docs/staged-migrations)

## Syncing Ordergroove Data

*   [Sync Ordergroove Data into Internal Systems](/docs/sync-ordergroove-data-into-internal-systems)
*   [Sync Objects](/docs/implement-custom-data-pipelines)
    *   [Implement Custom Data Pipelines](/docs/implement-custom-data-pipelines)
    *   [Using Prebuilt Connectors](/docs/using-prebuilt-connectors)
    *   [SFTP File Drops](/docs/sftp-file-drops)
*   [Sync Events](/docs/sync-events)

## Product Catalog

*   [Offer Tagging](/docs/offer-tagging)
*   [Product Feed](/docs/integrating-with-a-custom-platform)

## Subscription Enrollment

*   [Getting started](/docs/getting-started)
*   [First Order Place Date control for Shopify Merchants](/docs/first-order-place-date-control-for-shopify-merchants)
*   [Showing Discounted Price](/docs/showing-discounted-price-in-shopify)
*   [Customizing the Initial Offer Incentive (IOI)](/docs/customizing-the-initial-offer-incentive-ioi-using-shopify-scripts)
*   [Free shipping on initial orders](/docs/free-shipping-on-initial-orders-with-shopify-scripts)
*   [Cart Opt-In Tagging](/docs/shopify-cart-opt-in-tagging)
*   [Tagging the Product Details Page (PDP)](/docs/tagging-the-product-details-page-pdp)
*   [Real Time Stock Update](/docs/real-time-stock-update)
*   [Add a subscription to cart](/docs/modify-a-subscription-from-checkout-flow)
    *   [Offer Code Elements](/docs/offer-code-elements)
    *   [Domain Objects](/docs/domain-objects)
    *   [Helper Methods](/docs/helper-methods)
*   [Add a subscription offer to quickview, homepage, or other areas of your site](/docs/quickview-offers)
    *   [Tracking Affiliate Codes on Recurring Orders](/docs/tracking-affiliate-codes-on-recurring-orders)
*   [Troubleshooting Cart Offers](/docs/troubleshooting-cart-offers)
*   [Modify a subscription from email and SMS](/docs/modify-a-subscription-from-email-and-sms)
*   [Advanced Offer Customizations & FAQ](/docs/advanced-offer-customizations-faq)

## Subscription Manager Overview

*   [Subscription Manager From The Customer's Perspective](/docs/getting-started-1)
*   [Tour of Subscription Manager v25](/docs/tour-of-subscription-manager-v25)
    *   [Intro to v25 for Developers transitioning from v0](/docs/intro-to-v25-for-developers-transitioning-from-v0)
    *   [Customizing calendars and dates in v25](/docs/customizing-calendars-and-dates-in-v25)
    *   [Understanding Subscription Manager Custom Elements](/docs/understanding-subscription-manager-custom-elements)
*   [Subscription Manager File Descriptions](/docs/subscription-manager-file-descriptions)
*   [Subscription Manager v0 Components & Containers](/docs/subscription-manager-components-containers)
    *   [Subscription Manager Templates](/docs/subscription-manager-templates)
    *   [Orders Unsent Section](/docs/orders-unsent-section)
        *   [Skip Order](/docs/skip-order)
        *   [Send Now](/docs/send-now)
        *   [Change Date](/docs/change-date)
    *   [Orders Processing Section](/docs/orders-processing-section)
    *   [Inactive Subscriptions Section](/docs/inactive-subscriptions-section)
*   [Customize your Subscription Manager templates without breaking tracking](/docs/sm-template-customization-tracking)
*   [Subscription Manager Templates Changelog](/docs/subscription-manager-templates-changelog)

## Subscription Manager Modifications

*   [Subscription Manager Development Overview](/docs/subscription-manager-overview)
    *   [Edit Code with the Advanced Editor](/docs/edit-code-with-the-advanced-editor)
    *   [Subscription Manager Theme Editor Overview](/docs/subscription-manager-theme-editor-overview)
    *   [Subscription Manager Development Guide](/docs/subscription-manager-development-guide)
    *   [Customizing Subscription Manager Sections on Shopify](/docs/customizing-subscription-manager-sections-on-shopify)
    *   [Refreshing data in the Subscription Manager](/docs/refreshing-data-in-the-subscription-manager)
    *   [Objects](/docs/objects)
    *   [Object Reference](/docs/object-reference)
    *   [Translations](/docs/translations)
    *   [Subscription Manager Local Development](/docs/subscription-manager-local-development)
    *   [Debugging with Redux](/docs/debugging-with-redux)
    *   [Working with dates in the Subscription Manager](/docs/working-with-dates-in-the-subscription-manager)
*   [Modify the Change Billing Process Button](/docs/modify-the-change-billing-process-button)
*   [Implementing Country & State Dropdown in Subscription Manager Themes](/docs/implementing-country-state-dropdown-in-subscription-manager-themes)
*   [Adding a Cancel Button to Modals](/docs/adding-a-cancel-button-to-modals)
*   [Limiting Future Dates in the Change Date Calendar](/docs/limiting-future-dates-in-the-change-date-calendar)
*   [Dynamic Shipping Restrictions in the Subscription Manager](/docs/dynamic-shipping-restrictions-in-the-subscription-manager)
*   [One Time SKU Swap Configuration in the Subscription Manager](/docs/one-time-sku-swap-configuration-in-the-subscription-manager)
*   [Adding a Scrollbar to Inactive Subscriptions in the Subscription Manager](/docs/adding-a-scrollbar-to-inactive-subscriptions-in-the-subscription-manager)
*   [Enabling Payment Updates for Shopify New Accounts](/docs/enabling-payment-updates-for-shopify-new-accounts)

## Subscription Manager Development with APIs

*   [Calling Ordergrooveâ€™s REST APIs from within Subscription Manager](/docs/call-rest-apis-from-within-subscription-manager)
*   [Integrating External APIs in the Subscription Manager](/docs/integrating-external-apis-in-the-subscription-manager)

## Tagging Subscription Manager

*   [Tagging the Subscription Manager](/docs/tagging-the-subscription-manager-on-shopify)
*   [Convert your customers/account page to support Online Store 2.0](/docs/convert-your-customersaccount-page-to-support-online-store-20)

## Upsell and 1-Click

*   [Instant Upsell Overview](/docs/getting-started-2)
    *   [Instant Upsell through API](/docs/add-a-one-time-item-to-an-upcoming-order)
*   [1-Click Actions in Emails](/docs/1-click-actions-in-emails)

## Subscription Types

*   [Bundle Subscriptions](/docs/bundle-subscriptions)
    *   [Configuring Bundles](/docs/configuring-bundles)
    *   [Box Subscription Creation on Shopify](/docs/box-subscription-creation-on-shopify)
    *   [Bundle API Components](/docs/bundle-api-components)
    *   [Build Your Own Box Subscriptions (Legacy)](/docs/build-your-own-box-subscriptions)
        *   [Shopify - Build Your Own Box Subscriptions (Legacy)](/docs/build-your-own-box-subscriptions-on-shopify)
*   [Guided Selling](/docs/guided-selling)
*   [Curation Subscriptions: Rotating Box or Club](/docs/curation-subscriptions-rotating-box-or-club)
*   [Prepaid Subscriptions](/docs/how-to-manage-prepaid-renewal-behaviors)
    *   [How to Manage Prepaid Renewal Behaviors](/docs/how-to-manage-prepaid-renewal-behaviors)
*   [Rotating Subscriptions](/docs/rotating-subscriptions)
    *   [Ordinal Based Rotating Products](/docs/ordinal-based-rotating-products)
    *   [Time Window Based Rotating Products](/docs/time-window-based-rotating-products)
*   [Digital Subscriptions](/docs/digital-subscriptions)

## program data

*   [Configuring PayPal](/docs/configuring-paypal)
*   [Removing Ordergroove code from your Shopify theme](/docs/removing-ordergroove-code-from-your-shopify-theme)
*   [Webhooks overview (Legacy)](/docs/via-webhooks)
    *   [Configure Webhooks via API](/docs/configure-webhooks-via-api)
    *   [Expiring or Termed Subscriptions Using Webhooks](/docs/expiring-or-termed-subscriptions-using-webhooks)
*   [HMAC and AES Authentication](/docs/hmac-and-aes-authentication)

# Integrating External APIs in the Subscription Manager

[Suggest Edits](/edit/integrating-external-apis-in-the-subscription-manager)

This guide provides an approach for extending the functionality of the Subscription Manager by integrating external APIs. By following the steps outlined, you can dynamically pull in additional data and render them within your application.

> ## ðŸš§
> 
> **Note**: The example code is abbreviated for ease of reading; please add appropriate error handling.

* * *

## 

Basic usage

[](#basic-usage)

### 

Step One â€“ Add Function to script.js for API Request

[](#step-one--add-function-to-scriptjs-for-api-request)

First, add an asynchronous function to script.js that uses the [Fetch API](https://developer.mozilla.org/en-US/docs/Web/API/Fetch_API) to request data from an external API. In this example, we'll use a URL of a cat image.

File: script.js

`async function get_cat_url() {  const response = await fetch('https://api.thecatapi.com/v1/images/search');  const [{ url: catUrl }] = await response.json();  return catUrl; }`

### 

Step Two â€“ Add Function to script.js to Render Dynamic Content

[](#step-two--add-function-to-scriptjs-to-render-dynamic-content)

Next, add a function that returns a template literal with a value from the API response. Utilize the [html](https://static.ordergroove.com/@ordergroove/smi-core/0.32.5/docs/functions/api.html.html) function from [lit-html](https://lit.dev/docs/v1/lit-html/introduction/) to interpret and render the template literal efficiently.

File: script.js

``async function render_cat_image() {   const catUrl = await get_cat_url();   return window.og.smi.html`<img src="${catUrl}" alt="cat" />`; }``

### 

Step Three â€“ Call the Render Function from Liquid Partial

[](#step-three--call-the-render-function-from-liquid-partial)

Finally, call the function from the desired location in the liquid template. Chain a call to [until](https://static.ordergroove.com/@ordergroove/smi-core/0.32.5/docs/interfaces/filters.Filters.html#until) to ensure placeholder content is rendered until the asynchronous function resolves.

File: <partial-name>.liquid

`{{ 'render_cat_image()' | js | until }}`

* * *

## 

Additional Usage

[](#additional-usage)

### 

Pass Arguments to Functions

[](#pass-arguments-to-functions)

**Static Argument**

File: <partial-name>.liquid

`{{ 'render_cat_image("tabby")' | js | until }}`

**Dynamic Argument from Partial Scope**

In the below example, we assume `order` is in scope.

File: <partial-name>.liquid

`{{ 'render_cat_image(order.public_id)' | js | until }}`

  

### 

Set API Response as Variable in Liquid Partial

[](#set-api-response-as-variable-in-liquid-partial)

File: <partial-name>.liquid

`{% set cat_url = 'get_cat_url()' | js %}`

  

### 

Call API on Button Click

[](#call-api-on-button-click)

File: <partial-name>.liquid

`<button @click={{ 'get_cat_url' | js }}>   Get Cat URL </button>`

  

### 

Update Application State on API Response

[](#update-application-state-on-api-response)

To gracefully update the application state upon receiving an API response, you can call one of the [og.smi API methods](/docs/refreshing-data-in-the-subscription-manager) to refresh the page state. The example below dispatches an action to request all processing and upcoming orders and updates the application state accordingly.

File: script.js

`async function get_cat_url() {  const response = await fetch('https://api.thecatapi.com/v1/images/search');  const [{ url: catUrl }] = await response.json();  window.og.smi.api.refresh_page_state();  return catUrl; }`

  

### 

Call an API Outside the Context of Partials

[](#call-an-api-outside-the-context-of-partials)

To make an API call independent of partials, such as a single call during application initialization, invoke the API request function directly from `script.js`. If the function relies on the presence of the SMI element, call the function from the bootstrap function. The example below fetches a cat URL and appends an image to the SMI element.

File: script.js

`function bootstrap(el) {   smiElement = el;   append_cat();   ...rest of function }  async function append_cat() {  const catUrl = await get_cat_url();  const catElement = document.createElement('img');  catElement.setAttribute('src', catUrl);  smiElement.appendChild(catElement); }`

Updated 7 months ago

* * *

*   [Table of Contents](#)
*   *   [Basic usage](#basic-usage)
        *   [Step One â€“ Add Function to script.js for API Request](#step-one--add-function-to-scriptjs-for-api-request)
        *   [Step Two â€“ Add Function to script.js to Render Dynamic Content](#step-two--add-function-to-scriptjs-to-render-dynamic-content)
        *   [Step Three â€“ Call the Render Function from Liquid Partial](#step-three--call-the-render-function-from-liquid-partial)
    *   [Additional Usage](#additional-usage)
        *   [Pass Arguments to Functions](#pass-arguments-to-functions)
        *   [Set API Response as Variable in Liquid Partial](#set-api-response-as-variable-in-liquid-partial)
        *   [Call API on Button Click](#call-api-on-button-click)
        *   [Update Application State on API Response](#update-application-state-on-api-response)
        *   [Call an API Outside the Context of Partials](#call-an-api-outside-the-context-of-partials)
