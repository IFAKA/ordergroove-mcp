---
title: Subscription Manager Development Guide
source: https://developer.ordergroove.com/docs/subscription-manager-development-guide
converted_from: html
---

# Subscription Manager Development Guide

## Ordergroove 101

*   [Developer Fundamentals](/docs/developer-fundamentals)
    *   [Systems Landscape Map](/docs/landscape-map)
    *   [Data model at a glance](/docs/data-model-at-a-glance)
    *   [Subscription Creation via Purchase POST](/docs/subscription-creation-via-purchase-post)
    *   [Recurring Order Placement](/docs/recurring-order-placement)
    *   [Subscription Manager Tagging and Authentication](/docs/subscription-manager-tagging-and-authentication)
    *   [Customer and Payment Updates](/docs/customer-and-payment-updates)
*   [General FAQ](/docs/general-faq)
*   [Install Ordergroove on an Online Store 2.0 theme](/docs/use-ordergroove-with-online-store-20)
    *   [Installing Ordergroove with App Embed](/docs/installing-ordergroove-with-app-embed)
*   [Custom Platform and Headless Subscription Implementation](/docs/integrating-with-a-custom-platform-1)

## Program Migration

*   [Migrate my data to Ordergroove](/docs/program-migration)
*   [Self-serve migration guide](/docs/view-self-serve-migration-guide)
*   [Self-serve migration guide for Recharge](/docs/self-serve-migration-guide-for-recharge)
*   [Staged Migrations](/docs/staged-migrations)

## Syncing Ordergroove Data

*   [Sync Ordergroove Data into Internal Systems](/docs/sync-ordergroove-data-into-internal-systems)
*   [Sync Objects](/docs/implement-custom-data-pipelines)
    *   [Implement Custom Data Pipelines](/docs/implement-custom-data-pipelines)
    *   [Using Prebuilt Connectors](/docs/using-prebuilt-connectors)
    *   [SFTP File Drops](/docs/sftp-file-drops)
*   [Sync Events](/docs/sync-events)

## Product Catalog

*   [Offer Tagging](/docs/offer-tagging)
*   [Product Feed](/docs/integrating-with-a-custom-platform)

## Subscription Enrollment

*   [Getting started](/docs/getting-started)
*   [First Order Place Date control for Shopify Merchants](/docs/first-order-place-date-control-for-shopify-merchants)
*   [Showing Discounted Price](/docs/showing-discounted-price-in-shopify)
*   [Customizing the Initial Offer Incentive (IOI)](/docs/customizing-the-initial-offer-incentive-ioi-using-shopify-scripts)
*   [Free shipping on initial orders](/docs/free-shipping-on-initial-orders-with-shopify-scripts)
*   [Cart Opt-In Tagging](/docs/shopify-cart-opt-in-tagging)
*   [Tagging the Product Details Page (PDP)](/docs/tagging-the-product-details-page-pdp)
*   [Real Time Stock Update](/docs/real-time-stock-update)
*   [Add a subscription to cart](/docs/modify-a-subscription-from-checkout-flow)
    *   [Offer Code Elements](/docs/offer-code-elements)
    *   [Domain Objects](/docs/domain-objects)
    *   [Helper Methods](/docs/helper-methods)
*   [Add a subscription offer to quickview, homepage, or other areas of your site](/docs/quickview-offers)
    *   [Tracking Affiliate Codes on Recurring Orders](/docs/tracking-affiliate-codes-on-recurring-orders)
*   [Troubleshooting Cart Offers](/docs/troubleshooting-cart-offers)
*   [Modify a subscription from email and SMS](/docs/modify-a-subscription-from-email-and-sms)
*   [Advanced Offer Customizations & FAQ](/docs/advanced-offer-customizations-faq)

## Subscription Manager Overview

*   [Subscription Manager From The Customer's Perspective](/docs/getting-started-1)
*   [Tour of Subscription Manager v25](/docs/tour-of-subscription-manager-v25)
    *   [Intro to v25 for Developers transitioning from v0](/docs/intro-to-v25-for-developers-transitioning-from-v0)
    *   [Customizing calendars and dates in v25](/docs/customizing-calendars-and-dates-in-v25)
    *   [Understanding Subscription Manager Custom Elements](/docs/understanding-subscription-manager-custom-elements)
*   [Subscription Manager File Descriptions](/docs/subscription-manager-file-descriptions)
*   [Subscription Manager v0 Components & Containers](/docs/subscription-manager-components-containers)
    *   [Subscription Manager Templates](/docs/subscription-manager-templates)
    *   [Orders Unsent Section](/docs/orders-unsent-section)
        *   [Skip Order](/docs/skip-order)
        *   [Send Now](/docs/send-now)
        *   [Change Date](/docs/change-date)
    *   [Orders Processing Section](/docs/orders-processing-section)
    *   [Inactive Subscriptions Section](/docs/inactive-subscriptions-section)
*   [Customize your Subscription Manager templates without breaking tracking](/docs/sm-template-customization-tracking)
*   [Subscription Manager Templates Changelog](/docs/subscription-manager-templates-changelog)

## Subscription Manager Modifications

*   [Subscription Manager Development Overview](/docs/subscription-manager-overview)
    *   [Edit Code with the Advanced Editor](/docs/edit-code-with-the-advanced-editor)
    *   [Subscription Manager Theme Editor Overview](/docs/subscription-manager-theme-editor-overview)
    *   [Subscription Manager Development Guide](/docs/subscription-manager-development-guide)
    *   [Customizing Subscription Manager Sections on Shopify](/docs/customizing-subscription-manager-sections-on-shopify)
    *   [Refreshing data in the Subscription Manager](/docs/refreshing-data-in-the-subscription-manager)
    *   [Objects](/docs/objects)
    *   [Object Reference](/docs/object-reference)
    *   [Translations](/docs/translations)
    *   [Subscription Manager Local Development](/docs/subscription-manager-local-development)
    *   [Debugging with Redux](/docs/debugging-with-redux)
    *   [Working with dates in the Subscription Manager](/docs/working-with-dates-in-the-subscription-manager)
*   [Modify the Change Billing Process Button](/docs/modify-the-change-billing-process-button)
*   [Implementing Country & State Dropdown in Subscription Manager Themes](/docs/implementing-country-state-dropdown-in-subscription-manager-themes)
*   [Adding a Cancel Button to Modals](/docs/adding-a-cancel-button-to-modals)
*   [Limiting Future Dates in the Change Date Calendar](/docs/limiting-future-dates-in-the-change-date-calendar)
*   [Dynamic Shipping Restrictions in the Subscription Manager](/docs/dynamic-shipping-restrictions-in-the-subscription-manager)
*   [One Time SKU Swap Configuration in the Subscription Manager](/docs/one-time-sku-swap-configuration-in-the-subscription-manager)
*   [Adding a Scrollbar to Inactive Subscriptions in the Subscription Manager](/docs/adding-a-scrollbar-to-inactive-subscriptions-in-the-subscription-manager)
*   [Enabling Payment Updates for Shopify New Accounts](/docs/enabling-payment-updates-for-shopify-new-accounts)

## Subscription Manager Development with APIs

*   [Calling Ordergroove’s REST APIs from within Subscription Manager](/docs/call-rest-apis-from-within-subscription-manager)
*   [Integrating External APIs in the Subscription Manager](/docs/integrating-external-apis-in-the-subscription-manager)

## Tagging Subscription Manager

*   [Tagging the Subscription Manager](/docs/tagging-the-subscription-manager-on-shopify)
*   [Convert your customers/account page to support Online Store 2.0](/docs/convert-your-customersaccount-page-to-support-online-store-20)

## Upsell and 1-Click

*   [Instant Upsell Overview](/docs/getting-started-2)
    *   [Instant Upsell through API](/docs/add-a-one-time-item-to-an-upcoming-order)
*   [1-Click Actions in Emails](/docs/1-click-actions-in-emails)

## Subscription Types

*   [Bundle Subscriptions](/docs/bundle-subscriptions)
    *   [Configuring Bundles](/docs/configuring-bundles)
    *   [Box Subscription Creation on Shopify](/docs/box-subscription-creation-on-shopify)
    *   [Bundle API Components](/docs/bundle-api-components)
    *   [Build Your Own Box Subscriptions (Legacy)](/docs/build-your-own-box-subscriptions)
        *   [Shopify - Build Your Own Box Subscriptions (Legacy)](/docs/build-your-own-box-subscriptions-on-shopify)
*   [Guided Selling](/docs/guided-selling)
*   [Curation Subscriptions: Rotating Box or Club](/docs/curation-subscriptions-rotating-box-or-club)
*   [Prepaid Subscriptions](/docs/how-to-manage-prepaid-renewal-behaviors)
    *   [How to Manage Prepaid Renewal Behaviors](/docs/how-to-manage-prepaid-renewal-behaviors)
*   [Rotating Subscriptions](/docs/rotating-subscriptions)
    *   [Ordinal Based Rotating Products](/docs/ordinal-based-rotating-products)
    *   [Time Window Based Rotating Products](/docs/time-window-based-rotating-products)
*   [Digital Subscriptions](/docs/digital-subscriptions)

## program data

*   [Configuring PayPal](/docs/configuring-paypal)
*   [Removing Ordergroove code from your Shopify theme](/docs/removing-ordergroove-code-from-your-shopify-theme)
*   [Webhooks overview (Legacy)](/docs/via-webhooks)
    *   [Configure Webhooks via API](/docs/configure-webhooks-via-api)
    *   [Expiring or Termed Subscriptions Using Webhooks](/docs/expiring-or-termed-subscriptions-using-webhooks)
*   [HMAC and AES Authentication](/docs/hmac-and-aes-authentication)

# Subscription Manager Development Guide

[Suggest Edits](/edit/subscription-manager-development-guide)

Ordergroove’s Subscription Manager is built with a custom implementation of Nunjucks to maximize readability and ease of development without compromising performance on your store. This guide is aimed at developers with a good understanding of HTML, CSS, and JavaScript who are looking to customize their Subscription Manager.

* * *

## 

Requirements

[](#requirements)

This guide is relevant for developers working on either v0 or v25 of the Subscription Manager. Any examples will be taken from v25 of Subscription Manager.

* * *

## 

Overview

[](#overview)

Ordergroove’s Subscription Manager is built on a custom implementation of Nunjucks which transpiles into a [lit-html web component](https://lit.dev/docs/libraries/standalone-templates/) to be sent to the customer. This implementation enables the Subscription Manager to be built with the intuitive feel of a templating language, while maximizing DOM responsiveness to changes by the customer without necessitating a full-page refresh.

During development pre-compilation, the Subscription Manager templates are written as a combination of Nunjucks and lit-html.

* * *

## 

Fundamentals

[](#fundamentals)

This section will walk you through the fundamentals of Ordergroove’s Subscription Manager templating language.

### 

Nunjucks Tags and Expressions

[](#nunjucks-tags-and-expressions)

The primary means of logic in the Subscription Manager are Nunjucks tags and expressions. Key tags that are implemented are `if`, `set`, `for`, and `include`. These tags are used in brackets `{% %}`, just like in Nunjucks, and can be used to add logic around variables and what you want to render.

Example of `if` and `set`:

`{% if not subscription %}  {% set badge_class = "og-badge-one-time" %} {% elseif subscription.prepaid_subscription_context %}  {% set badge_class = "og-badge-prepaid" %} {% else %}  {% set badge_class = "og-badge-pay-as-you-go" %} {% endif %}`

Example of `for` and `include`:

`{% for order in orders %}   {% include 'order/main' %} {% endfor %}`

The `set` keyword can be used to set variables to primitives or objects. The `include` keyword is used to inject another `liquid` file into that location. When a file is included, it is inserted into the code as if its code was placed there instead of the `include`. You always need to include the absolute folder path of the partial from the base views folder in your `include` path, even if you’re referencing a file from the same subfolder.

Nunjucks variables and expressions can be displayed or inserted using `{{ }}` brackets. For example, if you wanted to display the value of `badge_class` from the example above, you could write `<p>{{badge_class}}</p>` to display it in a paragraph.

### 

Objects

[](#objects)

The Subscription Manager relies on objects containing customer subscription data that needs to be displayed. On load, the subscription manager retrieves all of the data for the customer and stores everything in the Redux store. Objects from the Redux store can be accessed directly through the Nunjucks template.

Some objects are documented [here](/docs/object-reference), but the Redux store itself is an excellent place to check to see what is available for your customers, since some features may be enabled on your store that aren’t shown in the documentation. Take a look at our [Debugging with Redux](/docs/debugging-with-redux) guide for more information.

### 

Filters and Pipes

[](#filters-and-pipes)

Nunjucks filters are used with pipes to modify and manipulate objects, variables, and strings. To use a filter, place a pipe and the filter inside Nunjucks brackets. For example, the `t` filter indicates that the string preceding it should be passed to the `locales` files to be matched with text content in the current language. `{{ ‘cancel_subscription_button’ | t }}` indicates that the translation for the “cancel\_subscription\_button” key in the locales file should be inserted there.

Filters can be chained left to right, with the output of the left-most filter serving as the input for the next filter, and so on.

Another key filter is `| js`, which takes in a Javascript function. It can be passed either the name of a Javascript function in `script.js`, or an inline function as a string, like `’(e) => console.log(e)’ | js`. The next section will discuss lit-html event bindings, the primary usage for this filter.

The `| action` filter is used to wire up a form to a JavaScript handler that validates the data and submits it to Ordergroove's APIs. These handler functions are not available to external developers.

The other filters that are implemented are described in the table below. More details on the filters can be found at [https://static.ordergroove.com/@ordergroove/smi-core/latest/docs/index.html](https://static.ordergroove.com/@ordergroove/smi-core/latest/docs/index.html), in the _Filters_ folder.

Filter

Usage

currency

Returns a localized currency number. Internally using [NumberFormat](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Intl/NumberFormat)

date

Returns a localized date in specified format. Formats are following dayjs with the full format documentation [here](https://day.js.org/docs/en/display/format). See our [SM date documentation](/docs/working-with-dates-in-the-subscription-manager) for more information.

dump

Stringifies the passed value

entries

Returns the result of JavaScript's Object.entries function

find

Implements [lodash find](https://lodash.com/docs/4.17.15#find)

first

Implements [lodash first](https://lodash.com/docs/4.17.15#first)

get

Implements [lodash get](https://lodash.com/docs/4.17.15#get)

if\_defined

Implements `ifDefined` from [lit-html](https://lit-html.polymer-project.org/guide/template-reference#ifdefined)

key

Extends the given list with a key, to allow efficient updates when the list changes

last

Implements [lodash last](https://lodash.com/docs/4.17.15#last)

reject

Implements [lodash reject](https://lodash.com/docs/4.17.15#reject). Used to limit the contents of an array to items which don’t meet the passed criteria

select

Creates an identity function based on an optional filter function. If no filter function is provided and the argument is a string of 32 length, a default filter function using public\_id will be used.

shuffle

Creates an array of shuffled values, using a version of the [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle)

sort

Implements [lodash sort](https://lodash.com/docs/4.17.15#sort)

until

Implements [lit-html until](https://lit.dev/docs/v1/lit-html/template-reference/#until)

If you need a filter which is not already implemented, please create a ZenDesk ticket with the filter and desired functionality.

### 

Lit-HTML Expressions

[](#lit-html-expressions)

Because Subscription Manager files ultimately compile to lit-html, many of lit-html’s expressions are available in addition to Nunjucks-style templating.

**Event Listeners**

The Ordergroove Subscription Manager supports adding event listeners to HTML elements with @ expressions through lit-element. Lit’s documentation on this process is available [here](https://lit.dev/docs/components/events/#adding-event-listeners-in-the-element-template).

For example, `@click="{{ 'SMDialog.open' | js }}"` means that on the “click” event, the javascript method `open` from `SMDialog` custom element will be called.

**Boolean Checks**

Boolean attributes in lit-element allow conditional setting of HTML attributes. They are set with ? at the beginning of the attribute. Lit’s documentation on this process is available [here](https://lit.dev/docs/templates/expressions/#boolean-attribute-expressions).

**Property Setting**

Lit-html’s property syntax allows setting a property on an element instead of the attribute. Lit’s documentation on this process is available [here](https://lit.dev/docs/templates/expressions/#property-expressions).

For example, `<input .value=${value}>` sets the `value` property directly and not the attribute, which would only set the default value. This is useful when you want to set a complex data property like an array or an object or when setting the property of an element is different than setting the attribute of an element.

### 

Comments

[](#comments)

Comments in the Subscription Manager are marked within `{# #}` brackets. Anything within these brackets will not be displayed in the DOM.

* * *

## 

Common Mistakes

[](#common-mistakes)

**Property accesses on null objects**

It’s important to note that in the Subscription Manager, variables have global scope but are not always defined when the subscription manager loads. This can lead to inconsistent loading states if a variable is being used without checking whether it is defined. The most common example is accessing a property on an object, like product.name, without first establishing that product is defined and not-null. If you have made customizations to your SM and start running into loading issues, check all of the property accesses and make sure the object is non-null.

**Duplicate IDs**

Some subscription manager liquid files render inputs with specific IDs. For example, `sku-swap-product-change-dialog.liquid` includes `<label>` elements with a `for` attribute set to the `id` of the corresponding `<input>`.

HTML

`<input   required   type="radio"   name="product"   value="{{alt_product_id}}"   class="visually-hidden"   id="alternative-product-{{alt_product_id}}-for-{{product.external_product_id}}-in-{{order_item.public_id}}" > <label   data-product-name="{{ alt_product.name }}"   for="alternative-product-{{alt_product_id}}-for-{{product.external_product_id}}-in-{{order_item.public_id}}" >`

In HTML, IDs are global. If you include this file multiple times on your theme when making customizations, you may have multiple `<input>` elements with the same ID. This may cause issues with interacting with those input elements -- if you're having trouble selecting a radio input option, check that it's the only input on the page with that ID.

Updated 7 months ago

* * *

*   [Table of Contents](#)
*   *   [Requirements](#requirements)
    *   [Overview](#overview)
    *   [Fundamentals](#fundamentals)
        *   [Nunjucks Tags and Expressions](#nunjucks-tags-and-expressions)
        *   [Objects](#objects)
        *   [Filters and Pipes](#filters-and-pipes)
        *   [Lit-HTML Expressions](#lit-html-expressions)
        *   [Comments](#comments)
    *   [Common Mistakes](#common-mistakes)
